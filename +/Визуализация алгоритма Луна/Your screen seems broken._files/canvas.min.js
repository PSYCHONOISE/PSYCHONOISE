(function(){for(var d=0,a=["ms","moz","webkit","o"],b=0;b<a.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"]||window[a[b]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){var e=(new Date).getTime(),f=Math.max(0,16-(e-d)),h=window.setTimeout(function(){a(e+f)},f);d=e+f;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();function luhn(d){var a=0;i=0;for(l=d.length;i<l;i++)a+=d[i]<<(i&1);return 0==(a%=10)?0:10-a}var C=document.querySelector("canvas"),c=C.getContext("2d"),W=C.width,H=C.height,S=W*H,v=[],t=[],g=c.createImageData(W,H);g.px=function(d,a){var b=4*d;this.data[b+0]=a;this.data[b+1]=a;this.data[b+2]=a;this.data[b+3]=255};for(i=0;i<S;i++)v[i]=i%2;
(function draw(){requestAnimationFrame(draw);var a=0;for(y=1;y<H-1;y++)for(x=1;x<W-1;x++)a=y*W+x,t[a]=luhn([v[a-W-1],v[a-W],v[a-W+1],v[a-1],v[a],v[a+1],v[a+W-1],v[a+W],v[a+W+1]]);v=t.slice(0);for(y=1;y<H-1;y++)for(x=1;x<W-1;x++)g.px(a=y*W+x,v[a]<<5);c.putImageData(g,0,0)})();
